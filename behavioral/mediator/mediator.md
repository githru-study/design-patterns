# 개요 정리

중재자(mediator) 패턴은 객체 간의 `혼란스러운 의존 관게들을 줄일 수 있는 디자인 패턴`이다.
이 패턴은 객체 간의 직접 통신을 제한하고 중재자 객체를 통해서만 협력하도록 한다.

## 해결하고자 하는 문제

어플리케이션에선 각 컴포넌트(객체,클래스)가 서로 다른 역할을 가지고 있으며 다른 컴포넌트와 상호작용하며 기능을 수행한다.

하지만 컴포넌트들이 서로 직접적으로 상호작용하게 되면 컴포넌트 간 결합도가 높아져서 유지보수가 어려워지거나 컴포넌트를 재사용하기 힘들어질 수 있다.

<img src="https://refactoring.guru/images/patterns/diagrams/mediator/problem1-ko-2x.png"/>

## 해결방안

중재자 패턴은 다음과 같이 서로 독립적으로 동작해야 하는 컴포의 모든 직접적인 상호작용을 중단한 후, 이러한 호출들을 적절한 컴포넌트들로 리다이렉션 하는 중재자 객체를 만들어 이러한 상호작용을 중재자에서 모두 처리하도록 한다.

이렇게 되면 컴포넌트들은 여러개의 컴포넌트와 결합되는 대신 단일 중재자 클래스에만 의존하게 된다.

이렇게 중간에 중재자 클래스를 만들게 되면, 컴포넌트간 데이터 교환 로직은 없애고 복잡한 데이터 검증과 같은 로직등은 중재자에게 위임하고 컴포넌트는 단순히 중재자에게 다른 컴포넌트들에게 해당 요소들에 발생하는 일을 알려달라는 메소드를 호출하는 것으로 역할을 나눌 수 있다.

즉 중재자는 단일 중자자 객체 내부의 다양한 객체간의 복잡한 관계망을 캡슐화 할 수 있다.

<img src="https://refactoring.guru/images/patterns/diagrams/mediator/solution1-ko-2x.png"/>

## UML

<img src="https://refactoring.guru/images/patterns/diagrams/mediator/structure-indexed-2x.png"/>

UML에서 각 객체들은 다음과 같은 속성을 가지고 있다.

### 컴포넌트

컴포넌트들은 어떤 비즈니스 로직을 포함한 다양한 클래스들이다.
각 컴포넌트들은 중재자에 대한 참조를 가지고 있다.
컴포넌트는 중재자의 실제 클래스를 인식하지 못하기 떄문에, 컴포넌트를 다른 중자재에 연결하여 다른 프로그램에서 재사용 할 수 있다.

### 중재자

일반적으로 단일 알람 메서드만을 포함하는 컴포넌트들간의 통신 메서드를 선언한 인터페이스이다.
컴포넌트들은 이 메서드의 인수로 어떠한 데이터든 전달할 수 있지만, 이는 수신자와 발신자간의 결합이 발생하지 않는 방식으로만 가능하다.

### 구상 중재자

중재자 인터페이스의 구현체로 다양한 컴포넌트간의 관계를 캡슐화한다. 구상 중재자들은 자신이 관리하는 모든 컴포넌트에 대한 참조를 유지하고, 때로는 그들의 생명주기를 관리하기도 한다.

## 주의해야할 점

1. 컴포넌트들은 다른 컴포넌트들에 대해서 몰라야 한다.
   컴포넌트 내에서 또는 컴포넌트 간 중요한 일이 발생하면 컴포넌트들은 이를 중재자에게만 알려야한다.
